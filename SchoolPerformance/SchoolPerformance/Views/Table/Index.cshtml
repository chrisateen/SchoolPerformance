@model IEnumerable<SchoolPerformance.ViewModels.TableViewModel>
@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<link href="~/bootstrap-table/bootstrap-table.css" rel="stylesheet" />
<script src="~/bootstrap-table/bootstrap-table.js"></script>
<script src="~/xlsx/xlsx.core.min.js"></script>
<script src="~/FileSaver.js/FileSaver.js"></script>
<script src="~/TableExport/tableExport.min.js"></script>
<script src="~/bootstrap-table/extensions/export/bootstrap-table-export.js"></script>

<div class="content-wrapper">

    <div class="pl-5 pr-5">
        <table id="resultsTable"
               class="table table-striped table-bordered"
               data-toggle="resultsTable">
            <thead>
                <tr>
                    <th data-field="urn" data-visible="false">
                        @Html.DisplayNameFor(m => m.First().URN)
                    </th>
                    <th data-field="schname" data-sortable="true">
                        @Html.DisplayNameFor(m => m.First().SCHNAME)
                    </th>
                    <th data-field="ptfsM6CLA1A" data-sortable="true">
                        @Html.DisplayNameFor(m => m.First().PTFSM6CLA1A)
                    </th>
                    <th data-field="atT8SCR" data-sortable="true">
                        @Html.DisplayNameFor(m => m.First().ATT8SCR)
                    </th>
                    <th data-field="p8MEA" data-sortable="true">
                        @Html.DisplayNameFor(m => m.First().P8MEA)
                    </th>
                    <th data-field="ptL2BASICS_94" data-sortable="true">
                        @Html.DisplayNameFor(m => m.First().PTL2BASICS_94)
                    </th>
                    <th data-field="ptL2BASICS_95" data-sortable="true">
                        @Html.DisplayNameFor(m => m.First().PTL2BASICS_95)
                    </th>
                </tr>
            </thead>


        </table>
    </div>

</div>

<script>
    var $table = $('#resultsTable');
    var results = @Json.Serialize(Model);
        
    //Adds the data to the table
    //change the default name when data is exported
    $(function () {
        $table.bootstrapTable({
            data: results,
            height: 800,
            pageList: [10, 25, 50, 100, 'All'],
            pageSize: 10,
            pagination: true,
            search: true,
            showFullscreen: true,
            showColumns: true,
            showExport: true,
            exportOptions: {
                    fileName: function () {
                        return 'schoolResults'
                    }
                }
            })
    });
</script>
